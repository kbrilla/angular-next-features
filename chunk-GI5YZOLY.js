import{g as F}from"./chunk-AONJ6A5C.js";import{$a as t,Ab as c,Bb as p,Ka as D,Na as U,Za as N,_a as n,ab as j,ba as I,bb as l,cb as o,eb as w,mb as b,pb as e,qb as a,rb as k,sb as h,ub as A,za as i}from"./chunk-DTWOPLIO.js";var z=class u{transform(m){return m===null?"null":m===void 0?"undefined":String(m)}static \u0275fac=function(r){return new(r||u)};static \u0275pipe=U({name:"stringifyNullish",type:u,pure:!0})},T=class u{config=I(null);set configData(m){this.config.set(m)}static \u0275fac=function(r){return new(r||u)};static \u0275cmp=D({type:u,selectors:[["app-legacy-chaining"]],inputs:{configData:"configData"},decls:43,vars:32,consts:[[1,"panel","legacy"],[1,"badge","legacy-badge"],[1,"small"],[1,"result-row"],[1,"value"],[1,"comparison-box"],[1,"result-true"]],template:function(r,d){if(r&1&&(l(0,"div",0)(1,"h3"),e(2,"Legacy Component"),o(),l(3,"span",1),e(4,"optionalChainingSemantics: 'legacy'"),o(),l(5,"p",2),e(6,"a?.b returns "),l(7,"strong"),e(8,"null"),o(),e(9," when a is nullish"),o(),l(10,"div",3)(11,"code"),e(12,"config?.theme"),o(),l(13,"span",4),e(14),c(15,"stringifyNullish"),o()(),l(16,"div",3)(17,"code"),e(18,"config?.api?.baseUrl"),o(),l(19,"span",4),e(20),c(21,"stringifyNullish"),o()(),l(22,"div",3)(23,"code"),e(24,"config?.api?.timeout"),o(),l(25,"span",4),e(26),c(27,"stringifyNullish"),o()(),l(28,"div",3)(29,"code"),e(30,"config?.api?.headers?.authorization"),o(),l(31,"span",4),e(32),c(33,"stringifyNullish"),o()(),l(34,"div",5)(35,"p")(36,"strong"),e(37,"Strict equality (legacy):"),o()(),l(38,"code"),e(39,"config?.api?.timeout === null"),o(),l(40,"span",6),e(41),c(42,"stringifyNullish"),o()()()),r&2){let g,P,O,E,S,C,_,y,M,x,v,f,s;i(13),b("value-null",((g=d.config())==null?null:g.theme)===null)("value-undefined",((P=d.config())==null?null:P.theme)===void 0),i(),a(p(15,22,(O=d.config())==null?null:O.theme)),i(5),b("value-null",((E=d.config())==null||E.api==null?null:E.api.baseUrl)===null)("value-undefined",((S=d.config())==null||S.api==null?null:S.api.baseUrl)===void 0),i(),a(p(21,24,(C=d.config())==null||C.api==null?null:C.api.baseUrl)),i(5),b("value-null",((_=d.config())==null||_.api==null?null:_.api.timeout)===null)("value-undefined",((y=d.config())==null||y.api==null?null:y.api.timeout)===void 0),i(),a(p(27,26,(M=d.config())==null||M.api==null?null:M.api.timeout)),i(5),b("value-null",((x=d.config())==null||x.api==null||x.api.headers==null?null:x.api.headers.authorization)===null)("value-undefined",((v=d.config())==null||v.api==null||v.api.headers==null?null:v.api.headers.authorization)===void 0),i(),a(p(33,28,(f=d.config())==null||f.api==null||f.api.headers==null?null:f.api.headers.authorization)),i(9),h("",((s=d.config())==null||s.api==null?null:s.api.timeout)===null," (returns ",p(42,30,(s=d.config())==null||s.api==null?null:s.api.timeout),")")}},dependencies:[z],styles:[".panel[_ngcontent-%COMP%]{padding:20px;border-radius:8px;height:100%}.legacy[_ngcontent-%COMP%]{background:var(--adev-surface);border:1px solid var(--adev-warning)}h3[_ngcontent-%COMP%]{margin-top:0;color:var(--adev-text);font-weight:600}.badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 10px;border-radius:6px;font-size:11px;font-weight:600;font-family:JetBrains Mono,monospace}.legacy-badge[_ngcontent-%COMP%]{background:#fbbf241f;color:#fbbf24}.small[_ngcontent-%COMP%]{font-size:13px;color:var(--adev-text-secondary)}code[_ngcontent-%COMP%]{background:var(--adev-code-bg);border:1px solid var(--adev-code-border);padding:2px 6px;border-radius:4px;font-size:12px;color:var(--adev-primary)}.result-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;margin:6px 0;background:var(--adev-surface-2);border-radius:6px}.value[_ngcontent-%COMP%]{font-weight:700;color:var(--adev-warning);padding:2px 8px;border-radius:6px}.value-null[_ngcontent-%COMP%]{background:#fbbf2424;border:1px solid rgba(251,191,36,.35);box-shadow:0 0 0 1px #fbbf242e inset}.value-undefined[_ngcontent-%COMP%]{background:#60a5fa1f;border:1px solid rgba(96,165,250,.35);color:#60a5fa;box-shadow:0 0 0 1px #60a5fa2e inset}.comparison-box[_ngcontent-%COMP%]{margin-top:12px;padding:10px 14px;background:#f8717114;border-radius:6px;border-left:3px solid var(--adev-error)}.comparison-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--adev-text-secondary)}.comparison-box[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:var(--adev-error)}.result-true[_ngcontent-%COMP%]{display:block;margin-top:4px;font-weight:700;color:var(--adev-success)}"]})},B=class u{config=I(null);set configData(m){this.config.set(m)}static \u0275fac=function(r){return new(r||u)};static \u0275cmp=D({type:u,selectors:[["app-native-chaining"]],inputs:{configData:"configData"},decls:43,vars:32,consts:[[1,"panel","native"],[1,"badge","native-badge"],[1,"small"],[1,"result-row"],[1,"value"],[1,"comparison-box"],[1,"result-false"]],template:function(r,d){if(r&1&&(l(0,"div",0)(1,"h3"),e(2,"Native Component"),o(),l(3,"span",1),e(4,"optionalChainingSemantics: 'native'"),o(),l(5,"p",2),e(6,"a?.b returns "),l(7,"strong"),e(8,"undefined"),o(),e(9," when a is nullish"),o(),l(10,"div",3)(11,"code"),e(12,"config?.theme"),o(),l(13,"span",4),e(14),c(15,"stringifyNullish"),o()(),l(16,"div",3)(17,"code"),e(18,"config?.api?.baseUrl"),o(),l(19,"span",4),e(20),c(21,"stringifyNullish"),o()(),l(22,"div",3)(23,"code"),e(24,"config?.api?.timeout"),o(),l(25,"span",4),e(26),c(27,"stringifyNullish"),o()(),l(28,"div",3)(29,"code"),e(30,"config?.api?.headers?.authorization"),o(),l(31,"span",4),e(32),c(33,"stringifyNullish"),o()(),l(34,"div",5)(35,"p")(36,"strong"),e(37,"Strict equality (native):"),o()(),l(38,"code"),e(39,"config?.api?.timeout === null"),o(),l(40,"span",6),e(41),c(42,"stringifyNullish"),o()()()),r&2){let g,P,O,E,S,C,_,y,M,x,v,f,s;i(13),b("value-null",((g=d.config())==null?void 0:g.theme)===null)("value-undefined",((P=d.config())==null?void 0:P.theme)===void 0),i(),a(p(15,22,(O=d.config())==null?void 0:O.theme)),i(5),b("value-null",((E=d.config())==null||E.api==null?void 0:E.api.baseUrl)===null)("value-undefined",((S=d.config())==null||S.api==null?void 0:S.api.baseUrl)===void 0),i(),a(p(21,24,(C=d.config())==null||C.api==null?void 0:C.api.baseUrl)),i(5),b("value-null",((_=d.config())==null||_.api==null?void 0:_.api.timeout)===null)("value-undefined",((y=d.config())==null||y.api==null?void 0:y.api.timeout)===void 0),i(),a(p(27,26,(M=d.config())==null||M.api==null?void 0:M.api.timeout)),i(5),b("value-null",((x=d.config())==null||x.api==null||x.api.headers==null?void 0:x.api.headers.authorization)===null)("value-undefined",((v=d.config())==null||v.api==null||v.api.headers==null?void 0:v.api.headers.authorization)===void 0),i(),a(p(33,28,(f=d.config())==null||f.api==null||f.api.headers==null?void 0:f.api.headers.authorization)),i(9),h("",((s=d.config())==null||s.api==null?void 0:s.api.timeout)===null," (returns ",p(42,30,(s=d.config())==null||s.api==null?void 0:s.api.timeout),")")}},dependencies:[z],styles:[".panel[_ngcontent-%COMP%]{padding:20px;border-radius:8px;height:100%}.native[_ngcontent-%COMP%]{background:var(--adev-surface);border:1px solid var(--adev-info)}h3[_ngcontent-%COMP%]{margin-top:0;color:var(--adev-text);font-weight:600}.badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 10px;border-radius:6px;font-size:11px;font-weight:600;font-family:JetBrains Mono,monospace}.native-badge[_ngcontent-%COMP%]{background:#60a5fa1f;color:#60a5fa}.small[_ngcontent-%COMP%]{font-size:13px;color:var(--adev-text-secondary)}code[_ngcontent-%COMP%]{background:var(--adev-code-bg);border:1px solid var(--adev-code-border);padding:2px 6px;border-radius:4px;font-size:12px;color:var(--adev-primary)}.result-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;margin:6px 0;background:var(--adev-surface-2);border-radius:6px}.value[_ngcontent-%COMP%]{font-weight:700;color:var(--adev-info);padding:2px 8px;border-radius:6px}.value-null[_ngcontent-%COMP%]{background:#fbbf2424;border:1px solid rgba(251,191,36,.35);color:#fbbf24;box-shadow:0 0 0 1px #fbbf242e inset}.value-undefined[_ngcontent-%COMP%]{background:#60a5fa24;border:1px solid rgba(96,165,250,.4);box-shadow:0 0 0 1px #60a5fa33 inset}.comparison-box[_ngcontent-%COMP%]{margin-top:12px;padding:10px 14px;background:#f8717114;border-radius:6px;border-left:3px solid var(--adev-error)}.comparison-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--adev-text-secondary)}.comparison-box[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:var(--adev-error)}.result-false[_ngcontent-%COMP%]{display:block;margin-top:4px;font-weight:700;color:var(--adev-error)}"]})},q=class u{currentConfig=I(null);fullConfig={theme:"dark",debug:!0,api:{baseUrl:"https://api.example.com",timeout:5e3,headers:{authorization:"Bearer token123"}}};partialConfig={theme:"light",api:{baseUrl:"https://api.example.com"}};minimalConfig={theme:"auto"};setFullConfig(){this.currentConfig.set(this.fullConfig)}setPartialConfig(){this.currentConfig.set(this.partialConfig)}setMinimalConfig(){this.currentConfig.set(this.minimalConfig)}setNullConfig(){this.currentConfig.set(null)}ngOnInit(){this.setPartialConfig()}static \u0275fac=function(r){return new(r||u)};static \u0275cmp=D({type:u,selectors:[["app-mixed-chaining-demo"]],decls:610,vars:60,consts:[[1,"demo-container"],[1,"description"],[1,"config-section"],[1,"config-code"],[1,"config-note"],[1,"side-by-side"],[3,"configData"],[1,"mix-match-section"],[1,"group-description"],[1,"example-row"],[1,"before"],[1,"arrow"],[1,"after"],[1,"reason"],[1,"note-box"],[1,"data-controls"],[1,"control-buttons"],[3,"click"],[1,"null-btn",3,"click"],[1,"data-preview"],[1,"migration-section"],[1,"migration-steps"],[1,"step"],[1,"step-num"],[1,"examples-section"],[1,"example-group","safe"],[1,"example-group","sensitive"],[1,"example-group","best-effort"],[1,"host-bindings-section"],[1,"note-box","gap-note"],[1,"inlay-hints-section"],[1,"native-hint"],[1,"legacy-hint"],[1,"issues-section"],[1,"issues-intro"],[1,"issue-card"],[1,"issue-header"],["href","https://github.com/angular/angular/issues/34385","target","_blank",1,"issue-link"],[1,"issue-title"],[1,"issue-desc"],[1,"issue-tags"],[1,"tag"],[1,"addressed"],["href","https://github.com/angular/angular/issues/37622","target","_blank",1,"issue-link"],["href","https://github.com/angular/angular/issues/37619","target","_blank",1,"issue-link"]],template:function(r,d){r&1&&(n(0,"div",0)(1,"h2"),e(2,"Mix and Match: Legacy + Native Optional Chaining"),t(),n(3,"p",1),e(4," Both components receive the "),n(5,"strong"),e(6,"same data"),t(),e(7," but use different "),n(8,"code"),e(9,"optionalChainingSemantics"),t(),e(10,". They coexist in the same app, proving per-component override works alongside the project-wide setting. "),t(),n(11,"div",2)(12,"h3"),e(13,"tsconfig.json (project-wide)"),t(),n(14,"pre",3),e(15),t(),n(16,"p",4),e(17," Each component can override via "),n(18,"code"),e(19,"optionalChainingSemantics: 'legacy'"),t(),e(20," or "),n(21,"code"),e(22,"'native'"),t(),e(23," in its @Component decorator. "),t()(),n(24,"div",5),j(25,"app-legacy-chaining",6)(26,"app-native-chaining",6),t(),n(27,"div",7)(28,"h3"),e(29,"Mix & Match: Component + Directive + hostDirectives"),t(),n(30,"p",8),e(31," Semantics can be set independently per declaration. A component can stay legacy while an attached directive (or a hostDirective composed into it) uses native semantics. "),t(),n(32,"div",9)(33,"div",10)(34,"code"),e(35),t()(),n(36,"div",11),e(37,"+"),t(),n(38,"div",12)(39,"code"),e(40),t()(),n(41,"div",13),e(42,"Template stays legacy, directive host bindings use native"),t()(),n(43,"div",9)(44,"div",10)(45,"code"),e(46,"hostDirectives: [NativeHostDir]"),t()(),n(47,"div",11),e(48,"+"),t(),n(49,"div",12)(50,"code"),e(51,"optionalChainingSemantics: 'legacy'"),t()(),n(52,"div",13),e(53,"Parent/child host behavior can differ intentionally"),t()(),n(54,"div",14),e(55," Recommendation: keep mixed mode temporary during rollout, then converge to native semantics project-wide. "),t()(),n(56,"div",15)(57,"h3"),e(58,"Test Data"),t(),n(59,"div",16)(60,"button",17),w("click",function(){return d.setFullConfig()}),e(61,"Full Config"),t(),n(62,"button",17),w("click",function(){return d.setPartialConfig()}),e(63,"Partial Config"),t(),n(64,"button",17),w("click",function(){return d.setMinimalConfig()}),e(65,"Minimal Config"),t(),n(66,"button",18),w("click",function(){return d.setNullConfig()}),e(67,"Null Config"),t()(),n(68,"pre",19),e(69),c(70,"json"),t()(),n(71,"div",20)(72,"h3"),e(73,"Migration Path"),t(),n(74,"div",21)(75,"div",22)(76,"span",23),e(77,"1"),t(),n(78,"div")(79,"strong"),e(80,"Enable diagnostic warning"),t(),n(81,"p")(82,"code"),e(83,'"legacySafeNavigationUsage": "warning"'),t(),e(84," in extended diagnostics"),t()()(),n(85,"div",22)(86,"span",23),e(87,"2"),t(),n(88,"div")(89,"strong"),e(90,"Run migration (safe mode)"),t(),n(91,"p")(92,"code"),e(93,"ng generate @angular/core:optional-chaining-semantics-migration"),t()()()(),n(94,"div",22)(95,"span",23),e(96,"3"),t(),n(97,"div")(98,"strong"),e(99,"Optional: interactive approval"),t(),n(100,"p")(101,"code"),e(102,"--interactive"),t(),e(103," to review/approve each migrated template/host expression"),t()()(),n(104,"div",22)(105,"span",23),e(106,"4"),t(),n(107,"div")(108,"strong"),e(109,"Enable native semantics"),t(),n(110,"p")(111,"code"),e(112,'"nativeOptionalChainingSemantics": true'),t(),e(113," in tsconfig"),t()()(),n(114,"div",22)(115,"span",23),e(116,"5"),t(),n(117,"div")(118,"strong"),e(119,"Per-component override"),t(),n(120,"p"),e(121,"Override individual components that need legacy behavior"),t()()()()(),n(122,"div",24)(123,"h3"),e(124,"Migration Examples (from actual schematic tests)"),t(),n(125,"div",25)(126,"h4"),e(127,"Safe Contexts (no change needed)"),t(),n(128,"p",8),e(129," These expressions behave identically with null or undefined \u2014 the migration schematic leaves them as-is. "),t(),n(130,"div",9)(131,"div",10)(132,"code"),e(133),t()(),n(134,"div",11),e(135,"\u2192"),t(),n(136,"div",12)(137,"code"),e(138),t()(),n(139,"div",13),e(140,'Interpolation renders both null and undefined as ""'),t()(),n(141,"div",9)(142,"div",10)(143,"code"),e(144),t()(),n(145,"div",11),e(146,"\u2192"),t(),n(147,"div",12)(148,"code"),e(149),t()(),n(150,"div",13),e(151,"Deep chains in interpolation \u2014 same rendering"),t()(),n(152,"div",9)(153,"div",10)(154,"code"),e(155),t()(),n(156,"div",11),e(157,"\u2192"),t(),n(158,"div",12)(159,"code"),e(160),t()(),n(161,"div",13),e(162,"?? catches both null and undefined"),t()(),n(163,"div",9)(164,"div",10)(165,"code"),e(166),t()(),n(167,"div",11),e(168,"\u2192"),t(),n(169,"div",12)(170,"code"),e(171),t()(),n(172,"div",13),e(173,"|| treats both as falsy"),t()(),n(174,"div",9)(175,"div",10)(176,"code"),e(177),t()(),n(178,"div",11),e(179,"\u2192"),t(),n(180,"div",12)(181,"code"),e(182),t()(),n(183,"div",13),e(184,"Both are falsy \u2014 same short-circuit"),t()(),n(185,"div",9)(186,"div",10)(187,"code"),e(188),t()(),n(189,"div",11),e(190,"\u2192"),t(),n(191,"div",12)(192,"code"),e(193),t()(),n(194,"div",13),e(195,"Negation: both falsy = true"),t()(),n(196,"div",9)(197,"div",10)(198,"code"),e(199),t()(),n(200,"div",11),e(201,"\u2192"),t(),n(202,"div",12)(203,"code"),e(204),t()(),n(205,"div",13),e(206,"Loose equality: null == undefined is true"),t()(),n(207,"div",9)(208,"div",10)(209,"code"),e(210),t()(),n(211,"div",11),e(212,"\u2192"),t(),n(213,"div",12)(214,"code"),e(215),t()(),n(216,"div",13),e(217,"Loose inequality: same rule"),t()(),n(218,"div",9)(219,"div",10)(220,"code"),e(221),t()(),n(222,"div",11),e(223,"\u2192"),t(),n(224,"div",12)(225,"code"),e(226),t()(),n(227,"div",13),e(228,"Condition position \u2014 truthiness check only"),t()(),n(229,"div",9)(230,"div",10)(231,"code"),e(232,"@if (user?.address)"),t()(),n(233,"div",11),e(234,"\u2192"),t(),n(235,"div",12)(236,"code"),e(237,"@if (user?.address)"),t()(),n(238,"div",13),e(239,"@if condition: both null and undefined are falsy"),t()(),n(240,"div",9)(241,"div",10)(242,"code"),e(243),t()(),n(244,"div",11),e(245,"\u2192"),t(),n(246,"div",12)(247,"code"),e(248),t()(),n(249,"div",13),e(250,"@else if: also a truthiness check, safe"),t()(),n(251,"div",9)(252,"div",10)(253,"code"),e(254,"@if (user?.address; as addr)"),t()(),n(255,"div",11),e(256,"\u2192"),t(),n(257,"div",12)(258,"code"),e(259,"@if (user?.address; as addr)"),t()(),n(260,"div",13),e(261,"@if with alias: condition is still a truthiness check"),t()(),n(262,"div",9)(263,"div",10)(264,"code"),e(265,"@defer (when config?.ready)"),t()(),n(266,"div",11),e(267,"\u2192"),t(),n(268,"div",12)(269,"code"),e(270,"@defer (when config?.ready)"),t()(),n(271,"div",13),e(272,"@defer when: boolean-like condition, safe"),t()(),n(273,"div",9)(274,"div",10)(275,"code"),e(276,'[class.active]="item?.selected"'),t()(),n(277,"div",11),e(278,"\u2192"),t(),n(279,"div",12)(280,"code"),e(281,'[class.active]="item?.selected"'),t()(),n(282,"div",13),e(283,"Class binding: truthy/falsy check, safe"),t()(),n(284,"div",9)(285,"div",10)(286,"code"),e(287,'[hidden]="!user?.isVisible"'),t()(),n(288,"div",11),e(289,"\u2192"),t(),n(290,"div",12)(291,"code"),e(292,'[hidden]="!user?.isVisible"'),t()(),n(293,"div",13),e(294,"Property binding with negation: safe"),t()()(),n(295,"div",26)(296,"h4"),e(297,"Sensitive Contexts (MUST convert \u2014 ternary form)"),t(),n(298,"p",8),e(299," These expressions would behave differently with null vs undefined. The migration converts them to explicit ternary guards. "),t(),n(300,"div",9)(301,"div",10)(302,"code"),e(303),t()(),n(304,"div",11),e(305,"\u2192"),t(),n(306,"div",12)(307,"code"),e(308),t()(),n(309,"div",13),e(310,"Preserves null return for === null checks"),t()(),n(311,"div",9)(312,"div",10)(313,"code"),e(314),t()(),n(315,"div",11),e(316,"\u2192"),t(),n(317,"div",12)(318,"code"),e(319),t()(),n(320,"div",13),e(321,"Deep chain: nested ternary guards"),t()(),n(322,"div",9)(323,"div",10)(324,"code"),e(325),t()(),n(326,"div",11),e(327,"\u2192"),t(),n(328,"div",12)(329,"code"),e(330),t()(),n(331,"div",13),e(332,"Guards start at first safe nav, not before"),t()(),n(333,"div",9)(334,"div",10)(335,"code"),e(336),t()(),n(337,"div",11),e(338,"\u2192"),t(),n(339,"div",12)(340,"code"),e(341),t()(),n(342,"div",13),e(343,'"prefixnull" vs "prefixundefined" would differ'),t()(),n(344,"div",9)(345,"div",10)(346,"code"),e(347),t()(),n(348,"div",11),e(349,"\u2192"),t(),n(350,"div",12)(351,"code"),e(352),t()(),n(353,"div",13),e(354,"null === null is true, undefined === null is false"),t()()(),n(355,"div",27)(356,"h4"),e(357,"Best Effort Mode (?? null fallback)"),t(),n(358,"p",8),e(359," When a "),n(360,"code"),e(361,"?."),t(),e(362," expression can't be converted to a ternary (method calls, keyed access, pipes), best-effort mode appends "),n(363,"code"),e(364,"?? null"),t(),e(365,". This ensures the return value remains null instead of undefined. "),n(366,"strong"),e(367,"Safety exception:"),t(),e(368," call-receiver patterns like "),n(369,"code"),e(370,"a?.method()"),t(),e(371," are intentionally skipped to avoid generating invalid code. "),t(),n(372,"div",9)(373,"div",10)(374,"code"),e(375),t()(),n(376,"div",11),e(377,"\u2192"),t(),n(378,"div",12)(379,"code"),e(380),t()(),n(381,"div",13),e(382,"Skipped for manual review (receiver-call rewrite is unsafe)"),t()(),n(383,"div",9)(384,"div",10)(385,"code"),e(386),t()(),n(387,"div",11),e(388,"\u2192"),t(),n(389,"div",12)(390,"code"),e(391),t()(),n(392,"div",13),e(393,"Keyed access: not a simple property chain"),t()(),n(394,"div",9)(395,"div",10)(396,"code"),e(397),t()(),n(398,"div",11),e(399,"\u2192"),t(),n(400,"div",12)(401,"code"),e(402),t()(),n(403,"div",13),e(404,"Pipe transform: best-effort fallback needed"),t()(),n(405,"div",9)(406,"div",10)(407,"code"),e(408),t()(),n(409,"div",11),e(410,"\u2192"),t(),n(411,"div",12)(412,"code"),e(413),t()(),n(414,"div",13),e(415,"Mixed chain with method: can't fully decompose"),t()()()(),n(416,"div",28)(417,"h3"),e(418,"\u2705 Host Bindings Follow Optional Chaining Semantics"),t(),n(419,"p",8),e(420," Optional chaining semantics now apply consistently across template expressions and host binding expressions ("),n(421,"code"),e(422,"@Component.host"),t(),e(423,", "),n(424,"code"),e(425,"@Directive.host"),t(),e(426,", host directives, and "),n(427,"code"),e(428,"@HostBinding"),t(),e(429," generated host instructions). "),t(),n(430,"div",9)(431,"div",10)(432,"code"),e(433),t()(),n(434,"div",11),e(435,"\u2192"),t(),n(436,"div",12)(437,"code"),e(438,"Respects selected semantics"),t()(),n(439,"div",13),e(440,"Template expressions"),t()(),n(441,"div",9)(442,"div",10)(443,"code"),e(444),t()(),n(445,"div",11),e(446,"\u2192"),t(),n(447,"div",12)(448,"code"),e(449,"Also respects selected semantics"),t()(),n(450,"div",13),e(451,"Host property bindings"),t()(),n(452,"div",9)(453,"div",10)(454,"code"),e(455),t()(),n(456,"div",11),e(457,"\u2192"),t(),n(458,"div",12)(459,"code"),e(460,"Directive host bindings use native behavior"),t()(),n(461,"div",13),e(462,"Per-directive override support"),t()(),n(463,"div",29)(464,"p")(465,"strong"),e(466,"Migration coverage:"),t(),e(467," The migration schematic now handles both component templates and host binding expressions in decorator metadata."),t(),n(468,"p")(469,"strong"),e(470,"Recommendation:"),t(),e(471," Enable "),n(472,"code"),e(473,"legacySafeNavigationUsage"),t(),e(474,", run the migration, then enable "),n(475,"code"),e(476,"nativeOptionalChainingSemantics"),t(),e(477," project-wide."),t()()(),n(478,"div",30)(479,"h3"),e(480,"\u{1F4A1} Inlay Hints Make the Difference Visible"),t(),n(481,"p",8),e(482," With "),n(483,"strong"),e(484,"inlay hints"),t(),e(485," enabled, the "),n(486,"code"),e(487,"null"),t(),e(488," vs "),n(489,"code"),e(490,"undefined"),t(),e(491," difference is immediately visible next to every "),n(492,"code"),e(493,"?."),t(),e(494," usage in the editor \u2014 without running the app. "),t(),n(495,"div",9)(496,"div",10)(497,"code"),e(498),n(499,"span",31),e(500,": string | undefined"),t()()(),n(501,"div",11),e(502,"vs"),t(),n(503,"div",12)(504,"code"),e(505),n(506,"span",32),e(507,": string | null"),t()()(),n(508,"div",13),e(509,"Inlay hint reveals semantics at a glance"),t()(),n(510,"div",14),e(511," See the "),n(512,"strong"),e(513,"Inlay Hints"),t(),e(514," demo for the complete reference of all 118 test scenarios and 25 configuration options. "),t()(),n(515,"div",33)(516,"h3"),e(517,"Community Issues Addressed"),t(),n(518,"p",34),e(519," These changes address longstanding community requests dating back to 2019: "),t(),n(520,"div",35)(521,"div",36)(522,"a",37),e(523,"#34385"),t(),n(524,"span",38),e(525,"Align with the optional chaining spec"),t()(),n(526,"p",39),e(527," Requests that template "),n(528,"code"),e(529,"?."),t(),e(530," match TC39 semantics (return "),n(531,"code"),e(532,"undefined"),t(),e(533," on short-circuit). Documents that generated TCB and runtime diverge from modern JS, and links to historical safe-navigation behavior. "),t(),n(534,"div",40)(535,"span",41),e(536,"runtime"),t(),n(537,"span",41),e(538,"type"),t(),n(539,"span",41),e(540,"migration"),t(),n(541,"span",41),e(542,"safe-navigation"),t()(),n(543,"p",42)(544,"strong"),e(545,"Addressed by:"),t(),n(546,"code"),e(547,"optionalChainingSemantics: 'native'"),t(),e(548," per-component and "),n(549,"code"),e(550,"nativeOptionalChainingSemantics: true"),t(),e(551," project-wide setting. "),t()(),n(552,"div",35)(553,"div",36)(554,"a",43),e(555,"#37622"),t(),n(556,"span",38),e(557,"optional chaining uses 'null', but strictTemplates treats it as 'undefined'"),t()(),n(558,"p",39)(559,"code"),e(560,"foo?.bar"),t(),e(561," yields "),n(562,"code"),e(563,"null"),t(),e(564," at runtime, but strict template checking infers "),n(565,"code"),e(566,"undefined"),t(),e(567,". This means declared inputs may accept the wrong union type, causing confusing type errors. "),t(),n(568,"div",40)(569,"span",41),e(570,"runtime"),t(),n(571,"span",41),e(572,"type"),t(),n(573,"span",41),e(574,"compiler"),t()(),n(575,"p",42)(576,"strong"),e(577,"Addressed by:"),t(),e(578," Native semantics aligns runtime ("),n(579,"code"),e(580,"undefined"),t(),e(581,") with what TypeScript's type checker expects, eliminating the null/undefined mismatch. "),t()(),n(582,"div",35)(583,"div",36)(584,"a",44),e(585,"#37619"),t(),n(586,"span",38),e(587,"strictTemplates + strictNullChecks doesn't work well with optional chaining"),t()(),n(588,"p",39),e(589," Strictness flags plus "),n(590,"code"),e(591,"?."),t(),e(592,` trigger "Object is possibly 'undefined'" diagnostics even though runtime guards exist. Points to TCB generation and upstream compiler/type-checking limitations. `),t(),n(593,"div",40)(594,"span",41),e(595,"type"),t(),n(596,"span",41),e(597,"migration"),t(),n(598,"span",41),e(599,"partial-compilation"),t()(),n(600,"p",42)(601,"strong"),e(602,"Addressed by:"),t(),e(603," With native semantics, the TCB correctly models the runtime return type as "),n(604,"code"),e(605,"T | undefined"),t(),e(606,", matching TypeScript's own "),n(607,"code"),e(608,"?."),t(),e(609," type narrowing. "),t()()()()),r&2&&(i(15),A("","{",`
  "angularCompilerOptions": `,"{",`
    "nativeOptionalChainingSemantics": true
  `,"}",`
`,"}"),i(10),N("configData",d.currentConfig()),i(),N("configData",d.currentConfig()),i(9),h("@Component(","{"," optionalChainingSemantics: 'legacy' ","}",")"),i(5),h("@Directive(","{"," optionalChainingSemantics: 'native' ","}",")"),i(29),a(p(70,58,d.currentConfig())),i(64),a("{{ a?.b }}"),i(5),a("{{ a?.b }}"),i(6),a("{{ a?.b?.c?.d }}"),i(5),a("{{ a?.b?.c?.d }}"),i(6),a("{{ a?.b ?? 'fallback' }}"),i(5),a("{{ a?.b ?? 'fallback' }}"),i(6),a("{{ a?.b || 'default' }}"),i(5),a("{{ a?.b || 'default' }}"),i(6),a("{{ a?.b && something }}"),i(5),a("{{ a?.b && something }}"),i(6),a("{{ !a?.b }}"),i(5),a("{{ !a?.b }}"),i(6),a("{{ a?.b == null }}"),i(5),a("{{ a?.b == null }}"),i(6),a("{{ a?.b != null }}"),i(5),a("{{ a?.b != null }}"),i(6),a("{{ a?.b ? x : y }}"),i(5),a("{{ a?.b ? x : y }}"),i(17),h("@if (a?.b?.c) ","{","...","}"," @else if (a?.d)"),i(5),h("@if (a?.b?.c) ","{","...","}"," @else if (a?.d)"),i(55),k("","{{ a?.b }}"," in strict equality"),i(5),a("{{ a != null ? a.b : null }}"),i(6),k("","{{ a?.b?.c }}"," in sensitive ctx"),i(5),a("{{ a != null ? (a.b != null ? a.b.c : null) : null }}"),i(6),k("","{{ a.b?.c?.d }}"," mixed chain"),i(5),a("{{ a.b != null ? (a.b.c != null ? a.b.c.d : null) : null }}"),i(6),a('"prefix" + a?.b'),i(5),a('"prefix" + (a != null ? a.b : null)'),i(6),a("{{ a?.b === null }}"),i(5),a("{{ (a != null ? a.b : null) === null }}"),i(23),a("a?.method()"),i(5),a("a?.method()"),i(6),a("a?.[key]"),i(5),a("a?.[key] ?? null"),i(6),a("a?.b | pipe"),i(5),a("a?.b ?? null | pipe"),i(6),a("a?.b?.method()?.c"),i(5),a("a?.b?.method()?.c ?? null"),i(20),k("template: '","{{ user?.name }}","'"),i(11),h("host: ","{","'[style.color]': 'theme?.primaryColor'","}"),i(11),h("@Directive(","{"," optionalChainingSemantics: 'native' ","}",")"),i(43),a("{{ user?.name }}"),i(7),a("{{ user?.name }}"))},dependencies:[T,B,F],styles:[".demo-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:32px 32px 64px}.description[_ngcontent-%COMP%]{color:var(--adev-text-secondary);line-height:1.6}code[_ngcontent-%COMP%]{background:var(--adev-code-bg);border:1px solid var(--adev-code-border);padding:2px 6px;border-radius:4px;font-size:13px;color:var(--adev-primary)}.config-section[_ngcontent-%COMP%]{background:var(--adev-surface);border:1px solid var(--adev-border);padding:20px;border-radius:8px;margin:20px 0}.config-code[_ngcontent-%COMP%]{background:var(--adev-code-bg);color:var(--adev-code-text);border:1px solid var(--adev-code-border);padding:12px;border-radius:6px;font-size:13px;overflow-x:auto}.config-note[_ngcontent-%COMP%]{font-size:13px;color:var(--adev-text-secondary);margin-bottom:0}.side-by-side[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin:20px 0}.data-controls[_ngcontent-%COMP%]{background:var(--adev-surface);border:1px solid var(--adev-border);padding:20px;border-radius:8px;margin:20px 0}.control-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0}button[_ngcontent-%COMP%]{background:var(--adev-accent);color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:13px}button[_ngcontent-%COMP%]:hover{opacity:.85}.null-btn[_ngcontent-%COMP%]{background:var(--adev-error)}.data-preview[_ngcontent-%COMP%]{background:var(--adev-code-bg);color:var(--adev-text-tertiary);border:1px solid var(--adev-code-border);padding:12px;border-radius:6px;font-size:12px;max-height:200px;overflow:auto}.migration-section[_ngcontent-%COMP%]{background:#4ade800f;border:1px solid rgba(74,222,128,.2);padding:20px;border-radius:8px;margin:20px 0}.migration-steps[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.step[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start;background:var(--adev-surface);padding:12px;border-radius:6px}.step-num[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;background:var(--adev-success);color:#0f0f11;font-weight:700;font-size:14px;flex-shrink:0}.step[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;font-size:13px;color:var(--adev-text-secondary)}.examples-section[_ngcontent-%COMP%]{background:var(--adev-surface);border:1px solid var(--adev-border);padding:20px;border-radius:8px;margin:20px 0}.examples-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--adev-text);border-bottom:1px solid var(--adev-border);padding-bottom:8px}.example-group[_ngcontent-%COMP%]{margin:16px 0;padding:16px;border-radius:8px}.example-group.safe[_ngcontent-%COMP%]{background:#4ade800f;border:1px solid rgba(74,222,128,.2)}.example-group.sensitive[_ngcontent-%COMP%]{background:#f871710f;border:1px solid rgba(248,113,113,.2)}.example-group.best-effort[_ngcontent-%COMP%]{background:#fbbf240f;border:1px solid rgba(251,191,36,.2)}.example-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0}.safe[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--adev-success)}.sensitive[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--adev-error)}.best-effort[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--adev-warning)}.group-description[_ngcontent-%COMP%]{font-size:13px;color:var(--adev-text-secondary);margin-bottom:12px}.example-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr 1fr;gap:8px;align-items:center;background:var(--adev-surface-2);padding:8px 12px;border-radius:6px;margin:6px 0;font-size:13px}.example-row[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{color:var(--adev-text-tertiary);font-size:16px;text-align:center}.example-row[_ngcontent-%COMP%]   .before[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:var(--adev-error)}.example-row[_ngcontent-%COMP%]   .after[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:var(--adev-success)}.example-row[_ngcontent-%COMP%]   .reason[_ngcontent-%COMP%]{color:var(--adev-text-tertiary);font-size:12px;font-style:italic}.issues-section[_ngcontent-%COMP%]{background:#a78bfa0f;border:1px solid rgba(167,139,250,.2);padding:20px;border-radius:8px;margin:20px 0}.issues-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--adev-accent);border-bottom:1px solid var(--adev-border);padding-bottom:8px}.issues-intro[_ngcontent-%COMP%]{font-size:13px;color:var(--adev-text-secondary)}.issue-card[_ngcontent-%COMP%]{background:var(--adev-surface);border:1px solid var(--adev-border);padding:16px;border-radius:8px;margin:12px 0}.issue-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:8px}.issue-link[_ngcontent-%COMP%]{background:var(--adev-accent);color:#0f0f11;padding:2px 8px;border-radius:4px;font-size:12px;font-weight:700;text-decoration:none}.issue-link[_ngcontent-%COMP%]:hover{opacity:.85}.issue-title[_ngcontent-%COMP%]{font-weight:600;color:var(--adev-text);font-size:14px}.issue-desc[_ngcontent-%COMP%]{font-size:13px;color:var(--adev-text-secondary);line-height:1.6}.issue-tags[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap;margin:8px 0}.tag[_ngcontent-%COMP%]{background:#a78bfa1f;color:var(--adev-accent);padding:2px 8px;border-radius:6px;font-size:11px;font-weight:600}.addressed[_ngcontent-%COMP%]{background:#4ade8014;border-left:3px solid var(--adev-success);padding:8px 12px;border-radius:6px;font-size:13px;color:var(--adev-success);margin-bottom:0}.host-bindings-section[_ngcontent-%COMP%]{background:#fbbf240f;border:1px solid rgba(251,191,36,.2);padding:20px;border-radius:8px;margin:20px 0}.host-bindings-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--adev-warning)}.gap-note[_ngcontent-%COMP%]{margin-top:12px}.gap-note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:13px}.status-highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4ade801a,#22c55e0d);border:2px solid var(--adev-success);border-radius:8px;padding:12px 16px;margin-bottom:16px;font-size:15px;font-weight:600;color:var(--adev-success);display:flex;align-items:center;gap:8px;box-shadow:0 2px 8px #4ade8026}.status-icon[_ngcontent-%COMP%]{font-size:18px;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.note-box[_ngcontent-%COMP%]{background:var(--adev-surface);border:1px solid var(--adev-border);border-left:3px solid var(--adev-info);border-radius:8px;padding:14px 16px;font-size:14px;color:var(--adev-text-secondary);line-height:1.6}.inlay-hints-section[_ngcontent-%COMP%]{background:#f0a0c80f;border:1px solid rgba(240,160,200,.2);padding:20px;border-radius:8px;margin:20px 0}.inlay-hints-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--adev-primary)}.native-hint[_ngcontent-%COMP%]{color:#22c55e;font-style:italic;opacity:.7}.legacy-hint[_ngcontent-%COMP%]{color:#fb923c;font-style:italic;opacity:.7}@media(max-width:768px){.side-by-side[_ngcontent-%COMP%]{grid-template-columns:1fr}.example-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:4px}.example-row[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{display:none}}"]})};export{T as LegacyChainingComponent,q as MixedChainingDemoComponent,B as NativeChainingComponent,z as StringifyNullishPipe};
