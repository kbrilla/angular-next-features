import{Ba as i,Bb as m,Db as r,Eb as d,Fb as c,Ma as l,eb as t,fb as n,yb as e}from"./chunk-VGBZW4EW.js";var E=class a{static \u0275fac=function(o){return new(o||a)};static \u0275cmp=l({type:a,selectors:[["app-view-query-diagnostics-demo"]],decls:289,vars:48,consts:[[1,"demo-container"],[1,"demo-header"],[1,"badge","vq-badge"],[1,"badge","cap-badge"],[1,"demo-description"],[1,"example-section"],[1,"severity","error"],[1,"desc"],[1,"code-block"],[1,"fix-block"],[1,"severity","warning"],[1,"coverage-table"],[1,"cell-error"],[1,"cell-warning"],[1,"cell-none"],["colspan","5",1,"cell-none"],[1,"issues-section"],[1,"issue-card"],[1,"issue-header"],["href","https://github.com/angular/angular/issues/57879","target","_blank",1,"issue-link"],[1,"issue-title"],[1,"issue-desc"],["href","https://github.com/angular/angular/issues/59717","target","_blank",1,"issue-link"]],template:function(o,x){o&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),e(3,"View Query Target Validation"),n(),t(4,"span",2),e(5,"Compiler"),n(),t(6,"span",3),e(7,"6 diagnostics"),n()(),t(8,"p",4),e(9," New compile-time diagnostics that catch view query misuse "),t(10,"strong"),e(11,"before"),n(),e(12," runtime. These validate that "),t(13,"code"),e(14,"viewChild()"),n(),e(15,", "),t(16,"code"),e(17,"viewChildren()"),n(),e(18,", and their decorator equivalents target references that actually exist and are correctly used. "),n(),t(19,"div",5)(20,"h3"),e(21,"NG8023 \u2014 Missing Required View Query Target"),n(),t(22,"span",6),e(23,"Error"),n(),t(24,"p",7),e(25," When "),t(26,"code"),e(27,"viewChild.required('ref')"),n(),e(28," targets a template reference that doesn't exist anywhere in the template, the compiler produces an "),t(29,"strong"),e(30,"error"),n(),e(31,". At runtime, this would throw "),t(32,"code"),e(33,"NG0951"),n(),e(34,". "),n(),t(35,"div",8)(36,"pre")(37,"code"),e(38),n()()(),t(39,"div",9)(40,"h4"),e(41,"Fix"),n(),t(42,"pre")(43,"code"),e(44),n()()()(),t(45,"div",5)(46,"h3"),e(47,"NG8024 \u2014 Missing Optional View Query Target"),n(),t(48,"span",10),e(49,"Warning"),n(),t(50,"p",7),e(51," Optional queries such as "),t(52,"code"),e(53,"viewChild('ref')"),n(),e(54,", "),t(55,"code"),e(56,"viewChildren('ref')"),n(),e(57,", and default "),t(58,"code"),e(59,"@ViewChild('ref')"),n(),e(60," produce a warning when the target doesn't exist. These queries resolve to "),t(61,"code"),e(62,"undefined"),n(),e(63," at runtime. "),n(),t(64,"div",8)(65,"pre")(66,"code"),e(67),n()()()(),t(68,"div",5)(69,"h3"),e(70,"NG8025 \u2014 read:TemplateRef on Non-Template Element"),n(),t(71,"span",6),e(72,"Error"),n(),t(73,"p",7),e(74," When a query uses "),t(75,"code"),e(76,"read: TemplateRef"),n(),e(77," but the target reference is on a regular element (not "),t(78,"code"),e(79,"<ng-template>"),n(),e(80,"), the compiler produces an error. Reading "),t(81,"code"),e(82,"TemplateRef"),n(),e(83," from a "),t(84,"code"),e(85,"<div>"),n(),e(86," always returns "),t(87,"code"),e(88,"undefined"),n(),e(89,". "),n(),t(90,"div",8)(91,"pre")(92,"code"),e(93),n()()(),t(94,"div",9)(95,"h4"),e(96,"Fix \u2014 use ng-template"),n(),t(97,"pre")(98,"code"),e(99),n()()()(),t(100,"div",5)(101,"h3"),e(102,"NG8031 \u2014 Non-static Query Accessed Too Early"),n(),t(103,"span",10),e(104,"Warning"),n(),t(105,"p",7),e(106," Non-static view queries are not available in "),t(107,"code"),e(108,"constructor"),n(),e(109," or "),t(110,"code"),e(111,"ngOnInit"),n(),e(112,". Access them in "),t(113,"code"),e(114,"ngAfterViewInit"),n(),e(115,", or use "),t(116,"code"),e(117,"static: true"),n(),e(118," if appropriate. "),n(),t(119,"div",8)(120,"pre")(121,"code"),e(122),n()()()(),t(123,"div",5)(124,"h3"),e(125,"NG8028 \u2014 Static Query Target Inside Conditional"),n(),t(126,"span",6),e(127,"Error"),n(),t(128,"p",7),e(129," Static queries resolve before conditional blocks render. If the target exists only inside "),t(130,"code"),e(131,"@if"),n(),e(132,"/"),t(133,"code"),e(134,"*ngIf"),n(),e(135,", it can never be resolved correctly. "),n(),t(136,"div",8)(137,"pre")(138,"code"),e(139),n()()()(),t(140,"div",5)(141,"h3"),e(142,"NG8028 \u2014 Required Query Target Only in Conditional Block"),n(),t(143,"span",6),e(144,"Error"),n(),t(145,"p",7),e(146," When "),t(147,"code"),e(148,"viewChild.required('ref')"),n(),e(149," targets a reference that only exists inside "),t(150,"code"),e(151,"@if"),n(),e(152,", "),t(153,"code"),e(154,"@switch"),n(),e(155,", "),t(156,"code"),e(157,"@for"),n(),e(158,", or "),t(159,"code"),e(160,"@defer"),n(),e(161,", the query may throw "),t(162,"code"),e(163,"NG0951"),n(),e(164," at runtime when the condition is false. "),n(),t(165,"div",8)(166,"pre")(167,"code"),e(168),n()()(),t(169,"div",9)(170,"h4"),e(171,"Fix \u2014 use optional query"),n(),t(172,"pre")(173,"code"),e(174,"el = viewChild('panel');  // \u2713 Optional \u2014 returns undefined when absent"),n()(),t(175,"h4"),e(176,"Fix \u2014 move ref outside conditional"),n(),t(177,"pre")(178,"code"),e(179),n()()()(),t(180,"div",5)(181,"h3"),e(182,"Diagnostic Coverage Matrix"),n(),t(183,"table",11)(184,"thead")(185,"tr")(186,"th"),e(187,"Scenario"),n(),t(188,"th"),e(189,"viewChild.required()"),n(),t(190,"th"),e(191,"viewChild()"),n(),t(192,"th"),e(193,"viewChildren()"),n(),t(194,"th"),e(195,"@ViewChild()"),n(),t(196,"th"),e(197),n()()(),t(198,"tbody")(199,"tr")(200,"td"),e(201,"Missing target"),n(),t(202,"td",12),e(203,"NG8023 Error"),n(),t(204,"td",13),e(205,"NG8024 Warning"),n(),t(206,"td",13),e(207,"NG8024 Warning"),n(),t(208,"td",13),e(209,"NG8024 Warning"),n(),t(210,"td",12),e(211,"NG8023 Error"),n()(),t(212,"tr")(213,"td"),e(214,"read:TemplateRef on <div>"),n(),t(215,"td",12),e(216,"NG8025 Error"),n(),t(217,"td",12),e(218,"NG8025 Error"),n(),t(219,"td",12),e(220,"NG8025 Error"),n(),t(221,"td",12),e(222,"NG8025 Error"),n(),t(223,"td",12),e(224,"NG8025 Error"),n()(),t(225,"tr")(226,"td"),e(227,"Target only in @if/@switch/@defer"),n(),t(228,"td",12),e(229,"NG8028 Error"),n(),t(230,"td",14),e(231,"\u2014"),n(),t(232,"td",14),e(233,"\u2014"),n(),t(234,"td",12),e(235,"NG8028 Error (static: true)"),n(),t(236,"td",12),e(237,"NG8028 Error (static: true)"),n()(),t(238,"tr")(239,"td"),e(240,"Accessed in constructor/ngOnInit"),n(),t(241,"td",13),e(242,"NG8031 Warning (non-static)"),n(),t(243,"td",13),e(244,"NG8031 Warning (non-static)"),n(),t(245,"td",14),e(246,"\u2014"),n(),t(247,"td",13),e(248,"NG8031 Warning (non-static)"),n(),t(249,"td",13),e(250,"NG8031 Warning (non-static)"),n()(),t(251,"tr")(252,"td"),e(253,"Type predicate (e.g. ElementRef)"),n(),t(254,"td",15),e(255,"Skipped \u2014 resolved by type, not by ref name"),n()(),t(256,"tr")(257,"td"),e(258,"Empty template"),n(),t(259,"td",15),e(260,"Skipped \u2014 may be placeholder/WIP code"),n()()()()(),t(261,"div",16)(262,"h3"),e(263,"Community Issues Addressed"),n(),t(264,"div",17)(265,"div",18)(266,"a",19),e(267,"#57879"),n(),t(268,"span",20),e(269,"viewChild.required() is lying about its type"),n()(),t(270,"p",21),e(271," Required and optional "),t(272,"code"),e(273,"viewChild"),n(),e(274,"/"),t(275,"code"),e(276,"viewChildren"),n(),e(277," queries had no compile-time validation that their targets actually existed in the template. NG8023\u2013NG8031 diagnostics now catch missing targets, incorrect "),t(278,"code"),e(279,"read"),n(),e(280," types, and static/required query conflicts. "),n()(),t(281,"div",17)(282,"div",18)(283,"a",22),e(284,"#59717"),n(),t(285,"span",20),e(286,"Provide better type safety for viewChild"),n()(),t(287,"p",21),e(288," Compile-time validation that view query targets exist in the template, with diagnostics for required queries targeting missing or conditionally-rendered elements. "),n()()()()),o&2&&(i(38),r("@Component(","{",`\xA0
  template: '<div>no refs here</div>'
`,"}",`)
export class MyComp `,"{",`\xA0
  // NG8023: Required view query 'el' expects a target matching 'missing',
  //         but no such target exists in the component's template.
  el = viewChild.required('missing');  // \u2190 ERROR
`,"}",`
`),i(6),r("@Component(","{",`\xA0
  template: '<div #missing>found</div>'  // \u2190 add the ref
`,"}",`)
export class MyComp `,"{",`\xA0
  el = viewChild.required('missing');  // \u2713 OK
`,"}",`
`),i(23),r("@Component(","{",`\xA0
  template: '<div>no refs here</div>'
`,"}",`)
export class MyComp `,"{",`\xA0
  // NG8024 (warning): target 'missing' does not exist
  el = viewChild('missing');
`,"}",`
`),i(26),d("@Component(","{",`\xA0
  template: '<div #myDiv>hello</div>'  // \u2190 regular element, NOT ng-template
`,"}",`)
export class MyComp `,"{",`\xA0
  // NG8025: View query 'tpl' uses 'read: TemplateRef' but the target
  //         '#myDiv' is on a regular element, not an <ng-template>.
  tpl = viewChild.required('myDiv', `,"{","\xA0read: TemplateRef ","}",`);  // \u2190 ERROR
`,"}",`
`),i(6),d("@Component(","{",`\xA0
  template: '<ng-template #myTpl>content</ng-template>'
`,"}",`)
export class MyComp `,"{",`\xA0
  tpl = viewChild.required('myTpl', `,"{","\xA0read: TemplateRef ","}",`);  // \u2713 OK
`,"}",`
`),i(23),d("@Component(","{"," template: '<div #el></div>' ","}",`)
export class MyComp `,"{",`
  el = viewChild('el');

  constructor() `,"{",`
    this.el(); // NG8031 warning
  `,"}",`
`,"}",`
`),i(17),c("@Component(","{",`
  template: '@if (show) `,"{"," <div #panel></div> ","}",`'
`,"}",`)
export class MyComp `,"{",`
  @ViewChild('panel', `,"{"," static: true ","}",`) panel!: unknown; // NG8028
`,"}",`
`),i(29),d("@Component(","{",`\xA0
  template: '@if (showPanel) `,"{","\xA0<div #panel>...</div> ","}",`'
`,"}",`)
export class MyComp `,"{",`\xA0
  showPanel = true;
  // NG8028: Required view query 'el' targets '#panel' which only exists
  //         inside a conditional block. When the condition is not met,
  //         this query will throw NG0951.
  el = viewChild.required('panel');  // \u2190 ERROR
`,"}",`
`),i(11),m("template: '<div #panel> @if (showPanel) ","{","\xA0...content... ","}","\xA0</div>'"),i(18),m("@ViewChild(","{"," required: true ","}",")"))},styles:[".demo-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem}.demo-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem;flex-wrap:wrap}.demo-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:var(--adev-text)}.badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:999px;font-size:.75rem;font-weight:600}.vq-badge[_ngcontent-%COMP%]{background:#4caf501f;color:#4caf50;border:1px solid rgba(76,175,80,.12)}.cap-badge[_ngcontent-%COMP%]{background:#60a5fa14;color:var(--adev-info);border:1px solid rgba(96,165,250,.12)}.demo-description[_ngcontent-%COMP%]{color:var(--adev-text-secondary);line-height:1.6;margin-bottom:2rem}.demo-description[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:var(--adev-code-bg);padding:.15rem .4rem;border-radius:4px;font-size:.9em;color:var(--adev-primary);border:1px solid var(--adev-code-border)}.example-section[_ngcontent-%COMP%]{background:var(--adev-surface);border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;border:1px solid var(--adev-border);color:var(--adev-text)}.example-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:var(--adev-text)}.severity[_ngcontent-%COMP%]{display:inline-block;padding:.15rem .5rem;border-radius:4px;font-size:.75rem;font-weight:700;margin-bottom:.5rem}.severity.error[_ngcontent-%COMP%]{background:#f8717114;color:var(--adev-error)}.severity.warning[_ngcontent-%COMP%]{background:#fbbf240f;color:var(--adev-warning)}.desc[_ngcontent-%COMP%]{color:var(--adev-text-secondary);line-height:1.6}.desc[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:var(--adev-code-bg);padding:.1rem .3rem;border-radius:3px;font-size:.85em;color:var(--adev-code-text);border:1px solid var(--adev-code-border)}.code-block[_ngcontent-%COMP%]{background:var(--adev-code-bg);border-radius:8px;padding:1rem 1.25rem;margin:1rem 0;overflow-x:auto;border:1px solid var(--adev-code-border)}.code-block[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}.code-block[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:var(--adev-code-text);font-family:Fira Code,Cascadia Code,monospace;font-size:.85rem;line-height:1.5;white-space:pre}.fix-block[_ngcontent-%COMP%]{background:#4ade800a;border-radius:8px;padding:1rem 1.25rem;margin-top:1rem;border-left:3px solid var(--adev-success)}.fix-block[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--adev-success);font-size:.9rem}.fix-block[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;background:#4ade800f;border-radius:4px;padding:.75rem;overflow-x:auto;color:var(--adev-text)}.fix-block[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:Fira Code,Cascadia Code,monospace;font-size:.85rem;color:var(--adev-text)}.coverage-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem;font-size:.85rem}.coverage-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .coverage-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.6rem .8rem;border:1px solid var(--adev-border);text-align:center}.coverage-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--adev-surface-2);font-weight:600;color:var(--adev-text)}.coverage-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:left;font-weight:500;color:var(--adev-text)}.cell-error[_ngcontent-%COMP%]{background:#f871710f;color:var(--adev-error);font-weight:600}.cell-warning[_ngcontent-%COMP%]{background:#fbbf240a;color:var(--adev-warning);font-weight:600}.cell-none[_ngcontent-%COMP%]{color:var(--adev-text-secondary)}.issues-section[_ngcontent-%COMP%]{background:#a78bfa0f;border:1px solid rgba(167,139,250,.2);padding:20px;border-radius:8px;margin:20px 0}.issues-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--adev-accent);border-bottom:1px solid var(--adev-border);padding-bottom:8px}.issue-card[_ngcontent-%COMP%]{background:var(--adev-surface);border:1px solid var(--adev-border);padding:16px;border-radius:8px;margin:12px 0}.issue-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:8px}.issue-title[_ngcontent-%COMP%]{font-weight:600;color:var(--adev-text);font-size:14px}.issue-desc[_ngcontent-%COMP%]{font-size:13px;color:var(--adev-text-secondary);line-height:1.6}.new-feature-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--adev-success),#059669);color:#fff;padding:2px 10px;border-radius:4px;font-size:11px;font-weight:700;letter-spacing:.5px}.issue-link[_ngcontent-%COMP%]{background:var(--adev-accent);color:#0f0f11;padding:2px 8px;border-radius:4px;font-size:12px;font-weight:700;text-decoration:none}.issue-link[_ngcontent-%COMP%]:hover{opacity:.85}"]})};export{E as ViewQueryDiagnosticsDemoComponent};
