import{Ka as l,bb as n,cb as t,pb as e,sb as r,ub as m,vb as d,za as i}from"./chunk-554P5J7G.js";var c=class a{static \u0275fac=function(o){return new(o||a)};static \u0275cmp=l({type:a,selectors:[["app-view-query-diagnostics-demo"]],decls:217,vars:30,consts:[[1,"demo-container"],[1,"demo-header"],[1,"badge","vq-badge"],[1,"badge","cap-badge"],[1,"demo-description"],[1,"example-section"],[1,"severity","error"],[1,"desc"],[1,"code-block"],[1,"fix-block"],[1,"coverage-table"],[1,"cell-error"],[1,"cell-none"],["colspan","4",1,"cell-none"],[1,"example-section","coming-soon"],[1,"upcoming-list"]],template:function(o,s){o&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),e(3,"View Query Target Validation"),t(),n(4,"span",2),e(5,"Compiler"),t(),n(6,"span",3),e(7,"3 diagnostics"),t()(),n(8,"p",4),e(9," New compile-time diagnostics that catch view query misuse "),n(10,"strong"),e(11,"before"),t(),e(12," runtime. These validate that "),n(13,"code"),e(14,"viewChild()"),t(),e(15,", "),n(16,"code"),e(17,"viewChildren()"),t(),e(18,", and their decorator equivalents target references that actually exist and are correctly used. "),t(),n(19,"div",5)(20,"h3"),e(21,"NG8023 \u2014 Missing Required View Query Target"),t(),n(22,"span",6),e(23,"Error"),t(),n(24,"p",7),e(25," When "),n(26,"code"),e(27,"viewChild.required('ref')"),t(),e(28," targets a template reference that doesn't exist anywhere in the template, the compiler produces an "),n(29,"strong"),e(30,"error"),t(),e(31,". At runtime, this would throw "),n(32,"code"),e(33,"NG0951"),t(),e(34,". "),t(),n(35,"div",8)(36,"pre")(37,"code"),e(38),t()()(),n(39,"div",9)(40,"h4"),e(41,"Fix"),t(),n(42,"pre")(43,"code"),e(44),t()()()(),n(45,"div",5)(46,"h3"),e(47,"NG8025 \u2014 read:TemplateRef on Non-Template Element"),t(),n(48,"span",6),e(49,"Error"),t(),n(50,"p",7),e(51," When a query uses "),n(52,"code"),e(53,"read: TemplateRef"),t(),e(54," but the target reference is on a regular element (not "),n(55,"code"),e(56,"<ng-template>"),t(),e(57,"), the compiler produces an error. Reading "),n(58,"code"),e(59,"TemplateRef"),t(),e(60," from a "),n(61,"code"),e(62,"<div>"),t(),e(63," always returns "),n(64,"code"),e(65,"undefined"),t(),e(66,". "),t(),n(67,"div",8)(68,"pre")(69,"code"),e(70),t()()(),n(71,"div",9)(72,"h4"),e(73,"Fix \u2014 use ng-template"),t(),n(74,"pre")(75,"code"),e(76),t()()()(),n(77,"div",5)(78,"h3"),e(79,"NG8028 \u2014 Required Query Target Only in Conditional Block"),t(),n(80,"span",6),e(81,"Error"),t(),n(82,"p",7),e(83," When "),n(84,"code"),e(85,"viewChild.required('ref')"),t(),e(86," targets a reference that only exists inside "),n(87,"code"),e(88,"@if"),t(),e(89,", "),n(90,"code"),e(91,"@switch"),t(),e(92,", "),n(93,"code"),e(94,"@for"),t(),e(95,", or "),n(96,"code"),e(97,"@defer"),t(),e(98,", the query may throw "),n(99,"code"),e(100,"NG0951"),t(),e(101," at runtime when the condition is false. "),t(),n(102,"div",8)(103,"pre")(104,"code"),e(105),t()()(),n(106,"div",9)(107,"h4"),e(108,"Fix \u2014 use optional query"),t(),n(109,"pre")(110,"code"),e(111,"el = viewChild('panel');  // \u2713 Optional \u2014 returns undefined when absent"),t()(),n(112,"h4"),e(113,"Fix \u2014 move ref outside conditional"),t(),n(114,"pre")(115,"code"),e(116),t()()()(),n(117,"div",5)(118,"h3"),e(119,"Diagnostic Coverage Matrix"),t(),n(120,"table",10)(121,"thead")(122,"tr")(123,"th"),e(124,"Scenario"),t(),n(125,"th"),e(126,"viewChild.required()"),t(),n(127,"th"),e(128,"viewChild()"),t(),n(129,"th"),e(130,"viewChildren()"),t(),n(131,"th"),e(132,"@ViewChild"),t()()(),n(133,"tbody")(134,"tr")(135,"td"),e(136,"Missing target"),t(),n(137,"td",11),e(138,"NG8023 Error"),t(),n(139,"td",12),e(140,"\u2014"),t(),n(141,"td",12),e(142,"\u2014"),t(),n(143,"td",12),e(144,"\u2014"),t()(),n(145,"tr")(146,"td"),e(147,"read:TemplateRef on <div>"),t(),n(148,"td",11),e(149,"NG8025 Error"),t(),n(150,"td",11),e(151,"NG8025 Error"),t(),n(152,"td",11),e(153,"NG8025 Error"),t(),n(154,"td",11),e(155,"NG8025 Error"),t()(),n(156,"tr")(157,"td"),e(158,"Target only in @if/@switch/@defer"),t(),n(159,"td",11),e(160,"NG8028 Error"),t(),n(161,"td",12),e(162,"\u2014"),t(),n(163,"td",12),e(164,"\u2014"),t(),n(165,"td",12),e(166,"\u2014"),t()(),n(167,"tr")(168,"td"),e(169,"Type predicate (e.g. ElementRef)"),t(),n(170,"td",13),e(171,"Skipped \u2014 resolved by type, not by ref name"),t()(),n(172,"tr")(173,"td"),e(174,"Empty template"),t(),n(175,"td",13),e(176,"Skipped \u2014 may be placeholder/WIP code"),t()()()()(),n(177,"div",14)(178,"h3"),e(179,"Coming Soon"),t(),n(180,"ul",15)(181,"li")(182,"strong"),e(183,"NG8024 (Warning)"),t(),e(184," \u2014 Optional queries ("),n(185,"code"),e(186,"viewChild('ref')"),t(),e(187,", "),n(188,"code"),e(189,"viewChildren('ref')"),t(),e(190,") targeting non-existent refs. Will be implemented as an Extended Template Check for proper warning-level diagnostics. "),t(),n(191,"li")(192,"strong"),e(193,"Query Lifecycle Detection"),t(),e(194," \u2014 Detect when queries are accessed in lifecycle hooks where they're not yet available (e.g., "),n(195,"code"),e(196,"viewChild"),t(),e(197," in "),n(198,"code"),e(199,"constructor"),t(),e(200," or "),n(201,"code"),e(202,"ngOnInit"),t(),e(203," for non-static queries). "),t(),n(204,"li")(205,"strong"),e(206,"Static Query in Conditional"),t(),e(207," \u2014 "),n(208,"code"),e(209),t(),e(210,") inside "),n(211,"code"),e(212,"@if"),t(),e(213,"/"),n(214,"code"),e(215,"*ngIf"),t(),e(216," is always a bug. "),t()()()()),o&2&&(i(38),m("@Component(","{",`\xA0
  template: '<div>no refs here</div>'
`,"}",`)
export class MyComp `,"{",`\xA0
  // NG8023: Required view query 'el' expects a target matching 'missing',
  //         but no such target exists in the component's template.
  el = viewChild.required('missing');  // \u2190 ERROR
`,"}",`
`),i(6),m("@Component(","{",`\xA0
  template: '<div #missing>found</div>'  // \u2190 add the ref
`,"}",`)
export class MyComp `,"{",`\xA0
  el = viewChild.required('missing');  // \u2713 OK
`,"}",`
`),i(26),d("@Component(","{",`\xA0
  template: '<div #myDiv>hello</div>'  // \u2190 regular element, NOT ng-template
`,"}",`)
export class MyComp `,"{",`\xA0
  // NG8025: View query 'tpl' uses 'read: TemplateRef' but the target
  //         '#myDiv' is on a regular element, not an <ng-template>.
  tpl = viewChild.required('myDiv', `,"{","\xA0read: TemplateRef ","}",`);  // \u2190 ERROR
`,"}",`
`),i(6),d("@Component(","{",`\xA0
  template: '<ng-template #myTpl>content</ng-template>'
`,"}",`)
export class MyComp `,"{",`\xA0
  tpl = viewChild.required('myTpl', `,"{","\xA0read: TemplateRef ","}",`);  // \u2713 OK
`,"}",`
`),i(29),d("@Component(","{",`\xA0
  template: '@if (showPanel) `,"{","\xA0<div #panel>...</div> ","}",`'
`,"}",`)
export class MyComp `,"{",`\xA0
  showPanel = true;
  // NG8028: Required view query 'el' targets '#panel' which only exists
  //         inside a conditional block. When the condition is not met,
  //         this query will throw NG0951.
  el = viewChild.required('panel');  // \u2190 ERROR
`,"}",`
`),i(11),r("template: '<div #panel> @if (showPanel) ","{","\xA0...content... ","}","\xA0</div>'"),i(93),r("@ViewChild('ref', ","{","\xA0static: true ","}"))},styles:[".demo-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem}.demo-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem;flex-wrap:wrap}.demo-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:var(--adev-text)}.badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:999px;font-size:.75rem;font-weight:600}.vq-badge[_ngcontent-%COMP%]{background:#4caf501f;color:#4caf50;border:1px solid rgba(76,175,80,.12)}.cap-badge[_ngcontent-%COMP%]{background:#60a5fa14;color:var(--adev-info);border:1px solid rgba(96,165,250,.12)}.demo-description[_ngcontent-%COMP%]{color:var(--adev-text-secondary);line-height:1.6;margin-bottom:2rem}.demo-description[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:var(--adev-code-bg);padding:.15rem .4rem;border-radius:4px;font-size:.9em;color:var(--adev-primary);border:1px solid var(--adev-code-border)}.example-section[_ngcontent-%COMP%]{background:var(--adev-surface);border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;border:1px solid var(--adev-border);color:var(--adev-text)}.example-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:var(--adev-text)}.severity[_ngcontent-%COMP%]{display:inline-block;padding:.15rem .5rem;border-radius:4px;font-size:.75rem;font-weight:700;margin-bottom:.5rem}.severity.error[_ngcontent-%COMP%]{background:#f8717114;color:var(--adev-error)}.severity.warning[_ngcontent-%COMP%]{background:#fbbf240f;color:var(--adev-warning)}.desc[_ngcontent-%COMP%]{color:var(--adev-text-secondary);line-height:1.6}.desc[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:var(--adev-code-bg);padding:.1rem .3rem;border-radius:3px;font-size:.85em;color:var(--adev-code-text);border:1px solid var(--adev-code-border)}.code-block[_ngcontent-%COMP%]{background:var(--adev-code-bg);border-radius:8px;padding:1rem 1.25rem;margin:1rem 0;overflow-x:auto;border:1px solid var(--adev-code-border)}.code-block[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}.code-block[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:var(--adev-code-text);font-family:Fira Code,Cascadia Code,monospace;font-size:.85rem;line-height:1.5;white-space:pre}.fix-block[_ngcontent-%COMP%]{background:#4ade800a;border-radius:8px;padding:1rem 1.25rem;margin-top:1rem;border-left:3px solid var(--adev-success)}.fix-block[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--adev-success);font-size:.9rem}.fix-block[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;background:#4ade800f;border-radius:4px;padding:.75rem;overflow-x:auto;color:var(--adev-text)}.fix-block[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:Fira Code,Cascadia Code,monospace;font-size:.85rem;color:var(--adev-text)}.coverage-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem;font-size:.85rem}.coverage-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .coverage-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.6rem .8rem;border:1px solid var(--adev-border);text-align:center}.coverage-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--adev-surface-2);font-weight:600;color:var(--adev-text)}.coverage-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:left;font-weight:500;color:var(--adev-text)}.cell-error[_ngcontent-%COMP%]{background:#f871710f;color:var(--adev-error);font-weight:600}.cell-warning[_ngcontent-%COMP%]{background:#fbbf240a;color:var(--adev-warning);font-weight:600}.cell-none[_ngcontent-%COMP%]{color:var(--adev-text-secondary)}.coming-soon[_ngcontent-%COMP%]{border:2px dashed rgba(96,165,250,.2);background:#60a5fa08}.coming-soon[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--adev-info)}.upcoming-list[_ngcontent-%COMP%]{padding-left:1.5rem}.upcoming-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem;color:var(--adev-text-secondary);line-height:1.5}.upcoming-list[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#60a5fa0f;padding:.1rem .3rem;border-radius:3px;font-size:.85em;color:var(--adev-text)}"]})};export{c as ViewQueryDiagnosticsDemoComponent};
