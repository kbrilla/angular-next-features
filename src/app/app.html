<header class="app-header">
  <div class="header-left">
    <button mat-icon-button (click)="sidenavOpened.set(!sidenavOpened())" class="menu-btn">
      <mat-icon>menu</mat-icon>
    </button>
    <div class="brand">
      <img
        src="https://angular.dev/assets/images/press-kit/angular_icon_gradient.gif"
        alt="Angular"
        class="brand-logo"
      />
      <span class="brand-text">Angular Template Upgrades</span>
    </div>
  </div>
  <div class="header-right">
    <span class="version-badge">v21.2.0-next</span>
    <a
      mat-button
      href="https://github.com/kbrilla/angular"
      target="_blank"
      rel="noopener noreferrer"
      class="gh-link"
    >
      <mat-icon>open_in_new</mat-icon>
      GitHub
    </a>
  </div>
</header>

<div class="app-body">
  <nav class="sidebar" [class.collapsed]="!sidenavOpened()">
    <div class="nav-section-label">Demos</div>
    @for (item of navItems; track item.id) {
      <button
        class="nav-item"
        [class.active]="activeSection() === item.id"
        (click)="navigate(item.id)"
      >
        <mat-icon class="nav-icon">{{ item.icon }}</mat-icon>
        <span class="nav-label">{{ item.label }}</span>
        @if (item.badge) {
          <span class="nav-badge">{{ item.badge }}</span>
        }
      </button>
    }

    <div class="sidebar-footer">
      <div class="branch-info">
        <mat-icon class="branch-icon">merge_type</mat-icon>
        <div class="branch-tags">
          <span class="branch-tag">main + inlay-hints</span>
          <span class="branch-tag">optional-chaining</span>
          <span class="branch-tag">ts-features</span>
          <span class="branch-tag">css-intellisense</span>
          <span class="branch-tag">debug-overlay</span>
          <span class="branch-tag">selection-range</span>
          <span class="branch-tag">document-symbols</span>
          <span class="branch-tag">style-precedence</span>
        </div>
      </div>
    </div>
  </nav>

  <main class="content">
    @switch (activeSection()) {
      @case ('overview') {
        <div class="overview-page">
          <section class="hero">
            <div class="wip-banner">
              <mat-icon class="wip-icon">construction</mat-icon>
              <div>
                <strong>Work in Progress</strong>
                <p>Both this demo application and the features it showcases are under active
                  development. Some features may be incomplete, experimental, or subject to change.
                  Built from custom Angular compiler tarballs (branches combined into
                  <code>new_angular_features_demo</code>).</p>
              </div>
            </div>
            <h1 class="hero-title">Angular Template Upgrades</h1>
            <p class="hero-subtitle">
              Proposed features that modernize Angular's template expression system and developer
              experience
            </p>
          </section>

          <section class="feature-grid">
            <button class="feature-card" (click)="navigate('ts-features')">
              <div class="card-icon ts">
                <mat-icon>code</mat-icon>
              </div>
              <h3>TypeScript Template Features</h3>
              <p>
                Destructuring, BigInt, hex/octal/binary literals, computed properties, arrow rest
                params, block comments
              </p>
              <div class="card-footer">
                <span class="tag accent">NEW</span>
                <span class="tag">Parser</span>
                <span class="tag">Syntax</span>
              </div>
            </button>

            <button class="feature-card" (click)="navigate('optional-chaining')">
              <div class="card-icon oc">
                <mat-icon>link</mat-icon>
              </div>
              <h3>Native Optional Chaining</h3>
              <p>
                Align <code>?.</code> with ECMAScript — return <code>undefined</code> instead of
                <code>null</code>
              </p>
              <div class="card-footer">
                <span class="tag accent">NEW</span>
                <span class="tag">Runtime</span>
                <span class="tag">Migration</span>
              </div>
            </button>

            <button class="feature-card" (click)="navigate('mix-match')">
              <div class="card-icon mix">
                <mat-icon>compare_arrows</mat-icon>
              </div>
              <h3>Mix & Match</h3>
              <p>Legacy and native components side by side with migration path examples</p>
              <div class="card-footer">
                <span class="tag accent">NEW</span>
                <span class="tag">Comparison</span>
                <span class="tag">Migration</span>
              </div>
            </button>

            <button class="feature-card" (click)="navigate('inlay-hints')">
              <div class="card-icon ih">
                <mat-icon>visibility</mat-icon>
              </div>
              <h3>Inlay Hints</h3>
              <p>
                Angular-specific inlay hints for templates — types for &#64;for, &#64;if, &#64;let,
                events, pipes, and more
              </p>
              <div class="card-footer">
                <span class="tag accent">NEW</span>
                <span class="tag">LSP 3.17</span>
                <span class="tag">DX</span>
              </div>
            </button>

            <button class="feature-card" (click)="navigate('css-intellisense')">
              <div class="card-icon css">
                <mat-icon>palette</mat-icon>
              </div>
              <h3>CSS/ARIA IntelliSense</h3>
              <p>
                55+ diagnostics for CSS properties, units, ARIA attributes, DOM events, and
                host binding syntax
              </p>
              <div class="card-footer">
                <span class="tag accent">NEW</span>
                <span class="tag">Language Service</span>
                <span class="tag">Validation</span>
              </div>
            </button>

            <button class="feature-card" (click)="navigate('template-debug')">
              <div class="card-icon debug">
                <mat-icon>bug_report</mat-icon>
              </div>
              <h3>Template Debug Overlay</h3>
              <p>
                Live debug values, template breakpoints, and AST-based expression extraction
                in the editor
              </p>
              <div class="card-footer">
                <span class="tag accent">NEW</span>
                <span class="tag">Debugging</span>
                <span class="tag">LSP</span>
              </div>
            </button>

            <button class="feature-card" (click)="navigate('selection-range')">
              <div class="card-icon sr">
                <mat-icon>select_all</mat-icon>
              </div>
              <h3>Selection Range</h3>
              <p>
                Smart Expand Selection through Angular template AST —
                identifier to expression to element to block
              </p>
              <div class="card-footer">
                <span class="tag accent">NEW</span>
                <span class="tag">LSP 3.15</span>
                <span class="tag">Navigation</span>
              </div>
            </button>

            <button class="feature-card" (click)="navigate('document-symbols')">
              <div class="card-icon ds">
                <mat-icon>account_tree</mat-icon>
              </div>
              <h3>Document Symbols</h3>
              <p>
                Outline panel, breadcrumbs, Go to Symbol for Angular template
                elements, control flow, and declarations
              </p>
              <div class="card-footer">
                <span class="tag accent">NEW</span>
                <span class="tag">LSP</span>
                <span class="tag">Navigation</span>
              </div>
            </button>

            <button class="feature-card" (click)="navigate('style-precedence')">
              <div class="card-icon sp">
                <mat-icon>layers</mat-icon>
              </div>
              <h3>Style Precedence</h3>
              <p>
                Live demos showing how standalone vs module-based components
                resolve competing style bindings differently
              </p>
              <div class="card-footer">
                <span class="tag accent">NEW</span>
                <span class="tag">Runtime</span>
                <span class="tag">CSS IntelliSense</span>
              </div>
            </button>
          </section>

          <section class="stats-row">
            <div class="stat-card">
              <span class="stat-value">9</span>
              <span class="stat-label">Feature Branches</span>
            </div>
            <div class="stat-card">
              <span class="stat-value">13+</span>
              <span class="stat-label">New Template Features</span>
            </div>
            <div class="stat-card">
              <span class="stat-value">55+</span>
              <span class="stat-label">CSS/ARIA Diagnostics</span>
            </div>
            <div class="stat-card">
              <span class="stat-value">20+</span>
              <span class="stat-label">Inlay Hint Categories</span>
            </div>
          </section>
        </div>
      }
      @case ('ts-features') {
        <app-ts-features-demo />
      }
      @case ('optional-chaining') {
        <app-optional-chaining-legacy-demo />
      }
      @case ('mix-match') {
        <app-mixed-chaining-demo />
      }
      @case ('inlay-hints') {
        <app-inlay-hints-demo />
      }
      @case ('css-intellisense') {
        <app-css-intellisense-demo />
      }
      @case ('template-debug') {
        <app-template-debug-demo />
      }
      @case ('selection-range') {
        <app-selection-range-demo />
      }
      @case ('document-symbols') {
        <app-document-symbols-demo />
      }
      @case ('style-precedence') {
        <app-style-precedence-demo />
      }
    }
  </main>
</div>
